<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Main - Sanjivan Medico Traders</title>
    <style>
      /* Existing styles */
      :root {
        --primary-color: #4caf50;
        --secondary-color: #4caf50;
        --accent-color: #27ae60;
        --background-color: #ecf0f1;
        --text-color: #333;
        --white: #ffffff;
        --error-color: #e74c3c;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--background-color);
        color: var(--text-color);
        line-height: 1.6;
      }

      /* Header Styling */
      header {
        background-color: var(--primary-color);
        color: var(--white);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 5px rgba(0, 0, s, 0.1);
      }

      header h1 {
        font-size: 1.5rem;
        font-weight: 600;
      }

      #logout-btn {
        background-color: var(--error-color);
        color: var(--white);
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      #logout-btn:hover {
        background-color: #c0392b;
      }

      /* Container Styling */
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      h2 {
        color: var(--primary-color);
        margin-bottom: 20px;
        border-bottom: 2px solid var(--accent-color);
        padding-bottom: 10px;
      }

      /* Table Styling */
      table {
        width: 100%;
        border-collapse: collapse;
        background-color: var(--white);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        margin-bottom: 20px;
      }

      th,
      td {
        padding: 12px;
        border: 1px solid #e0e0e0;
        text-align: center;
        vertical-align: middle;
      }

      th {
        background-color: var(--secondary-color);
        color: var(--white);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      /* Input Styling */
      input {
        width: 100%;
        padding: 10px;
        margin: 5px 0;
        border: 1px solid #d1d1d1;
        border-radius: 4px;
        transition: border-color 0.3s ease;
      }

      input:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 5px rgba(39, 174, 96, 0.3);
      }

      input.error {
        border: 2px solid var(--error-color);
      }

      #dropdownSelect {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border: 1px solid #d1d1d1;
        border-radius: 4px;
      }

      /* Buttons */
      #add-button {
        background-color: var(--accent-color);
        color: var(--white);
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      #add-button:hover {
        background-color: #2ecc71;
      }

      .delete-btn {
        background-color: var(--error-color);
        color: var(--white);
        border: none;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      .delete-btn:hover {
        background-color: #c0392b;
      }

      /* Responsive Design */
      @media screen and (max-width: 1024px) {
        .container {
          padding: 15px;
        }

        table {
          font-size: 14px;
        }

        th,
        td {
          padding: 10px;
        }
      }

      @media screen and (max-width: 768px) {
        header {
          flex-direction: column;
          text-align: center;
          gap: 10px;
        }

        header h1 {
          font-size: 1.2rem;
        }

        #logout-btn {
          width: 100%;
          max-width: 200px;
        }

        table,
        th,
        td {
          font-size: 12px;
        }

        input,
        #dropdownSelect {
          font-size: 12px;
          padding: 8px;
        }
      }

      @media screen and (max-width: 480px) {
        .container {
          padding: 10px;
        }

        table {
          display: block;
          overflow-x: auto;
        }

        th,
        td {
          min-width: 100px;
        }
      }
    </style>
  </head>

  <body>
    <header>
      <h1>Sanjivan Medico Traders</h1>
      <button id="logout-btn">Logout</button>
    </header>
    <div class="container">
      <h2>Add Record</h2>
      <table id="add-table">
        <thead>
          <tr>
            <th>Sr. No.</th>
            <th>Date</th>
            <th>Party Code</th>
            <th>Medical Name</th>
            <th>City</th>
            <th>Receipt No.</th>
            <th>Amount</th>
            <th>Remarks</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="add-row">
          <tr>
            <td></td>
            <td>
              <input type="date" id="date" required onchange="dateChange()" />
            </td>
            <td>
              <input
                type="text"
                id="party-code"
                placeholder="Party Code"
                oninput="filterDropDown()"
              />
              <select id="dropdownSelect" oninput="selectPartyCode()"></select>
            </td>
            <td>
              <input
                type="text"
                id="medical-name"
                placeholder="Medical Name"
                required
              />
            </td>
            <td>
              <input type="text" id="city" placeholder="City" required />
            </td>
            <td>
              <input
                type="text"
                id="receipt-no"
                placeholder="Receipt No."
                required
              />
            </td>
            <td>
              <input type="number" id="amount" placeholder="Amount" required />
            </td>
            <td><input type="text" id="remarks" placeholder="Remarks" /></td>
            <td><button id="add-button">Add</button></td>
          </tr>
        </tbody>
      </table>

      <h2>Record History</h2>
      <table id="history-table">
        <thead>
          <tr>
            <th>Sr. No.</th>
            <th>Date</th>
            <th>Party Code</th>
            <th>Medical Name</th>
            <th>City</th>
            <th>Receipt No.</th>
            <th>Amount</th>
            <th>Remarks</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="history-body">
          <!-- Records will appear here -->
        </tbody>
      </table>
    </div>

    <script>
      const today = new Date();
      const formattedDate = today.toISOString().split("T")[0];
      // Format the date as DD MMMM YYYY
      function formatDate(date) {
        const options = { day: "2-digit", month: "long", year: "numeric" };
        return new Date(date).toLocaleDateString("en-GB", options);
      }

      document.getElementById("date").value = formattedDate;

      // Clear all input fields when Add button is clicked
      document.getElementById("add-button").addEventListener("click", function () {
        document.getElementById("party-code").value = "";
        document.getElementById("medical-name").value = "";
        document.getElementById("city").value = "";
        document.getElementById("receipt-no").value = "";
        document.getElementById("amount").value = "";
        document.getElementById("remarks").value = "";
        document.getElementById("date").value = formattedDate;
      });

      // Data Deletion with confirmation
      function deleteRecord(row) {
        if (confirm("Are you sure you want to delete this record?")) {
          row.remove();
        }
      }

      // Add Record to History
      document.getElementById("add-button").onclick = function () {
        const date = document.getElementById("date").value;
        const partyCode = document.getElementById("party-code").value;
        const medicalName = document.getElementById("medical-name").value;
        const city = document.getElementById("city").value;
        const receiptNo = document.getElementById("receipt-no").value;
        const amount = document.getElementById("amount").value;
        const remarks = document.getElementById("remarks").value;

        if (
          !partyCode ||
          !medicalName ||
          !city ||
          !receiptNo ||
          !amount
        ) {
          alert("Please fill in all required fields.");
          return;
        }

        const row = document.createElement("tr");

        const srNo = document.createElement("td");
        srNo.textContent = document.querySelectorAll("#history-body tr").length + 1; // Increment Sr. No.
        row.appendChild(srNo);

        const dateTd = document.createElement("td");
        dateTd.textContent = formatDate(date);
        row.appendChild(dateTd);

        const partyCodeTd = document.createElement("td");
        partyCodeTd.textContent = partyCode;
        row.appendChild(partyCodeTd);

        const medicalNameTd = document.createElement("td");
        medicalNameTd.textContent = medicalName;
        row.appendChild(medicalNameTd);

        const cityTd = document.createElement("td");
        cityTd.textContent = city;
        row.appendChild(cityTd);

        const receiptNoTd = document.createElement("td");
        receiptNoTd.textContent = receiptNo;
        row.appendChild(receiptNoTd);

        const amountTd = document.createElement("td");
        amountTd.textContent = amount;
        row.appendChild(amountTd);

        const remarksTd = document.createElement("td");
        remarksTd.textContent = remarks;
        row.appendChild(remarksTd);

        const actionTd = document.createElement("td");
        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "Delete";
        deleteBtn.classList.add("delete-btn");
        deleteBtn.onclick = function () {
          deleteRecord(row);
        };
        actionTd.appendChild(deleteBtn);
        row.appendChild(actionTd);

        document.getElementById("history-body").appendChild(row);
      };
    </script>
  </body>
</html>
